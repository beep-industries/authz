schemaFile: "../../beep.zed"
relationships: |-
  // Server setup
  server:discord_server#owner@user:alice

  // Roles setup - test various permission combinations
  role:superadmin#server@server:discord_server
  role:superadmin#member@user:bob
  
  role:admin#server@server:discord_server
  role:admin#member@user:charlie
  
  role:moderator#server@server:discord_server
  role:moderator#member@user:diana
  
  role:viewer#server@server:discord_server
  role:viewer#member@user:eve
  
  role:member#server@server:discord_server
  role:member#member@user:frank
  role:member#member@user:grace

  // Permission assignments
  // Superadmin: can manage and view roles
  server:discord_server#role_manager@role:superadmin#member
  server:discord_server#role_viewer@role:superadmin#member
  
  // Admin: can only manage roles (not view - edge case)
  server:discord_server#role_manager@role:admin#member
  
  // Moderator: can only view roles (not manage)
  server:discord_server#role_viewer@role:moderator#member
  
  // Viewer: has viewer role but not role viewing permission (confusing naming test)
  // No permissions assigned
  
  // Member: no permissions

assertions:
  assertTrue:
    # Owner has all permissions
    - server:discord_server#can_manage_role@user:alice
    - server:discord_server#can_view_role@user:alice
    
    # Superadmin has both permissions
    - role:superadmin#manage@user:bob
    - role:superadmin#view@user:bob
    
    # Admin can manage (edge case: has manage but not view)
    - role:admin#manage@user:charlie
    
    # Moderator can view only
    - role:moderator#view@user:diana

  assertFalse:
    # Admin cannot view (edge case: has manage but not view)
    - role:admin#view@user:charlie
    
    # Moderator cannot manage
    - role:moderator#manage@user:diana
    
    # Viewer role has no role permissions
    - role:viewer#manage@user:eve
    - role:viewer#view@user:eve
    
    # Regular members have no permissions
    - role:member#manage@user:frank
    - role:member#view@user:frank
    - role:member#manage@user:grace
    - role:member#view@user:grace
